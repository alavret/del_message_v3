# –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Yandex 360

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ –ø–æ–∏—Å–∫–µ –∏ —É–¥–∞–ª–µ–Ω–∏–∏](#-—Ñ–∏–Ω–∞–ª—å–Ω—ã–π-–æ—Ç—á–µ—Ç-–æ-–ø–æ–∏—Å–∫–µ-–∏-—É–¥–∞–ª–µ–Ω–∏–∏)
- [–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —è—â–∏–∫–æ–≤](#-–Ω–æ–≤–∞—è-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å-—É–¥–∞–ª–µ–Ω–∏–µ-–∏–∑-–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö-—è—â–∏–∫–æ–≤)
- [–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: Checkpoint —Å–∏—Å—Ç–µ–º–∞](#-–Ω–æ–≤–∞—è-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ-—Å–æ—Å—Ç–æ—è–Ω–∏—è-–ø–æ—á—Ç–æ–≤—ã—Ö-—è—â–∏–∫–æ–≤-checkpoint)
- [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
  - [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
  - [–ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏](#–∞—Ä–≥—É–º–µ–Ω—Ç—ã-–∫–æ–º–∞–Ω–¥–Ω–æ–π-—Å—Ç—Ä–æ–∫–∏)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–ø—É—Å–∫—É —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –Ø–Ω–¥–µ–∫—Å 360 API](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-–∑–∞–ø—É—Å–∫—É-—Å–∫—Ä–∏–ø—Ç–∞-—Å–æ-—Å—Ç–æ—Ä–æ–Ω—ã-—è–Ω–¥–µ–∫—Å-360-api)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
  - [–í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–ø—É—Å–∫–∞](#–≤–∞—Ä–∏–∞–Ω—Ç—ã-–∑–∞–ø—É—Å–∫–∞)
  - [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–º–∞–Ω–¥-–∑–∞–ø—É—Å–∫–∞)
  - [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é](#3-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–º–µ–Ω—é)
- [–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#—Å—Ü–µ–Ω–∞—Ä–∏–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏-–∏-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
- [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
- [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
- [–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)](#—á–∞—Å—Ç–æ-–∑–∞–¥–∞–≤–∞–µ–º—ã–µ-–≤–æ–ø—Ä–æ—Å—ã-faq)
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#—Å–≤—è–∑–∞–Ω–Ω–∞—è-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –û–±–∑–æ—Ä

–°–∫—Ä–∏–ø—Ç `del_message_v3.py` - —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –ø–∏—Å–µ–º –≤ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–∞—Ö Yandex 360. –°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º API Yandex 360 –∏ IMAP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- üîç **–ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ Message-ID** - —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- üìä **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤** - —á–µ—Ä–µ–∑ –ª–æ–≥–∏ –∞—É–¥–∏—Ç–∞ Yandex 360
- üîç **–ü–æ–∏—Å–∫ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø–∏—Å–µ–º –∫–∞–∫ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–∞—Ö, —Ç–∞–∫ –∏ –≤ –æ–±—â–∏—Ö**
- üóëÔ∏è **–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —è—â–∏–∫–æ–≤** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- üíæ **Checkpoint —Å–∏—Å—Ç–µ–º–∞** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤
- üîê **–†–∞–±–æ—Ç–∞ —Å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —è—â–∏–∫–∞–º–∏** - –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- üß™ **–†–µ–∂–∏–º dry-run** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- üìã **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚ö° **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å** - –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤
- üéØ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é** - —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –û –ü–û–ò–°–ö–ï –ò –£–î–ê–õ–ï–ù–ò–ò

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≤–æ–¥–∏—Ç **–¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç**, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:

- ‚úÖ **–ë—ã–ª–æ –ª–∏ –Ω–∞–π–¥–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ** –≤ –∫–∞–∂–¥–æ–º –ø–æ—á—Ç–æ–≤–æ–º —è—â–∏–∫–µ
- üìÅ **–í –∫–∞–∫–∏—Ö –ø–∞–ø–∫–∞—Ö** –Ω–∞–π–¥–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "INBOX", "Sent", "Archive")
- üóëÔ∏è **–°—Ç–∞—Ç—É—Å —É–¥–∞–ª–µ–Ω–∏—è** (—É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ / –æ—à–∏–±–∫–∞ / –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)
- üìä **–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –ø–æ –≤—Å–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º —è—â–∏–∫–∞–º

### –ü—Ä–∏–º–µ—Ä –æ—Ç—á–µ—Ç–∞:

```
====================================================================================================
–§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –û –ü–û–ò–°–ö–ï –ò –£–î–ê–õ–ï–ù–ò–ò –°–û–û–ë–©–ï–ù–ò–Ø
====================================================================================================
–ò—Å–∫–æ–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: <example@mail.com>

‚úì –°–û–û–ë–©–ï–ù–ò–ï –ù–ê–ô–î–ï–ù–û –ò –û–ë–†–ê–ë–û–¢–ê–ù–û:

  –ü–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫: user1@example.ru
  –ü–∞–ø–∫–∏: INBOX, Sent
  –°—Ç–∞—Ç—É—Å: –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ

  –ü–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫: user2@example.ru
  –ü–∞–ø–∫–∏: Archive
  –°—Ç–∞—Ç—É—Å: –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ

–°–æ–æ–±—â–µ–Ω–∏–µ –ù–ï –Ω–∞–π–¥–µ–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —è—â–∏–∫–∞—Ö:
  - user3@example.ru

----------------------------------------------------------------------------------------------------
–ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
  –í—Å–µ–≥–æ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏: 3
  –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ –≤ —è—â–∏–∫–∞—Ö: 2
  –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ —è—â–∏–∫–∞—Ö: 1
  –ü—Ä–æ–ø—É—â–µ–Ω–æ —è—â–∏–∫–æ–≤: 0
  –û—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ: 0
====================================================================================================
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

- **–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ `.env`
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

- **–ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:**
  - `--id` - —É–∫–∞–∑–∞–Ω–∏–µ Message-ID —Å–æ–æ–±—â–µ–Ω–∏—è
  - `--date` - —É–∫–∞–∑–∞–Ω–∏–µ –¥–∞—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏—è
  - –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ email-–∞–¥—Ä–µ—Å–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞—Ç (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –¥–∏–∞–ø–∞–∑–æ–Ω –¥–Ω–µ–π)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ IMAP —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–µ–ª–µ–≥–∞—Ç–∞

### 2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é

- **–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é:**
  - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã
  - –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞:**
  - –í–≤–æ–¥ Message-ID —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –¥–∞—Ç–æ–π
  - –£–∫–∞–∑–∞–Ω–∏–µ –¥–∞—Ç—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –ø–æ–∏—Å–∫–∞ (¬±90 –¥–Ω–µ–π)
  - –£–∫–∞–∑–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ –∏–ª–∏ –≤—ã–±–æ—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`*`)
  - –û—á–∏—Å—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

- **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
  - –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–Ω—é –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏
  - –ü–æ–Ω—è—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

### 3. –ü–æ–∏—Å–∫ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Audit Log (–¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π < 90 –¥–Ω–µ–π):**
  - –ó–∞–ø—Ä–æ—Å –ª–æ–≥–æ–≤ –∞—É–¥–∏—Ç–∞ —á–µ—Ä–µ–∑ API Yandex 360
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–ø—É `message_receive`
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —è—â–∏–∫–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–µ
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö

- **–†—É—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞:**
  - –í–≤–æ–¥ —Å–ø–∏—Å–∫–∞ —è—â–∏–∫–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –∏–ª–∏ —Ç–æ—á–∫—É —Å –∑–∞–ø—è—Ç–æ–π
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (—Å–∏–º–≤–æ–ª `*`)
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

### 4. –ü–æ–∏—Å–∫ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ IMAP:**
  - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É `imap.yandex.ru:993`
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ basic authentication –¥–ª—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —è—â–∏–∫–æ–≤
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö (–¥–æ 3 —Ä–∞–∑)

- **–ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π:**
  - –ü–æ–∏—Å–∫ –ø–æ Message-ID –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º
  - –ü–æ–∏—Å–∫ –≤–æ –≤—Å–µ—Ö –ø–∞–ø–∫–∞—Ö –ø–æ—á—Ç–æ–≤–æ–≥–æ —è—â–∏–∫–∞ (INBOX, Sent, Archive –∏ –¥—Ä.)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–∞–ø–æ–∫

- **–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π:**
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ `\Deleted`
  - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã EXPUNGE –¥–ª—è –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
  - –ü–æ–¥—Å—á–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –ø–æ –∫–∞–∂–¥–æ–º—É —è—â–∏–∫—É

- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
  - –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ 5 –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ThreadPoolExecutor –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏
  - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —è—â–∏–∫–æ–≤

### 5. Checkpoint —Å–∏—Å—Ç–µ–º–∞ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (checkin):**
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø—Ä–∞–≤ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  - –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤: `checkin_YYYYMMDD_HHMMSS.txt`
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–ø–∏—Å–∫–∞ –¥–µ–ª–µ–≥–∞—Ç–æ–≤
  - –ö–∞—Ç–∞–ª–æ–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `mailbox_checkpoints/`

- **–°–æ–∑–¥–∞–Ω–∏–µ checkout —Ñ–∞–π–ª–æ–≤:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
  - –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤: `checkout_YYYYMMDD_HHMMSS.txt`
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **–°–æ–∑–¥–∞–Ω–∏–µ diff —Ñ–∞–π–ª–æ–≤:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–æ –∏ –ø–æ—Å–ª–µ
  - –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤: `diff_YYYYMMDD_HHMMSS_<random>.txt`
  - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ checkpoint:**
  - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ checkpoint —Ñ–∞–π–ª–∞
  - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
  - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ API

### 6. –†–∞–±–æ—Ç–∞ —Å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —è—â–∏–∫–∞–º–∏

- **–í—Ä–µ–º–µ–Ω–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ `shared_mailbox_owner`
  - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –æ—Ç –∏–º–µ–Ω–∏ –¥–µ–ª–µ–≥–∞—Ç–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –ø—Ä–∞–≤
  - –ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–∫–∏ –ø—Ä–∞–≤ –ø—Ä–∏ —Å–±–æ—è—Ö (try-finally –±–ª–æ–∫–∏)

- **IMAP –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
  - –§–æ—Ä–º–∞—Ç –ª–æ–≥–∏–Ω–∞: `–¥–æ–º–µ–Ω/–ª–æ–≥–∏–Ω/–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_—è—â–∏–∫`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–µ–ª–µ–≥–∞—Ç–∞
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### 7. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
  - –ö–æ–Ω—Å–æ–ª—å: —É—Ä–æ–≤–µ–Ω—å INFO –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –§–∞–π–ª: —É—Ä–æ–≤–µ–Ω—å DEBUG –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  - –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 10 –ú–ë
  - –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ 5 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π

- **–î–µ—Ç–∞–ª—å–Ω—ã–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç:**
  - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —è—â–∏–∫–æ–≤
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –∏ –ø–∞–ø–∫–∞—Ö
  - –°—Ç–∞—Ç—É—Å —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è—â–∏–∫–∞
  - –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### 8. –†–µ–∂–∏–º Dry Run

- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
  - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∫—Ä–æ–º–µ —É–¥–∞–ª–µ–Ω–∏—è
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –±—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
  - –ò–¥–µ–Ω—Ç–∏—á–Ω—ã–π –æ—Ç—á–µ—Ç –∫–∞–∫ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏
  - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤ —Ñ–∞–π–ª–µ `.env` –≤ –∫–∞—Ç–∞–ª–æ–≥–µ —Å–∫—Ä–∏–ø—Ç–∞ –∏–ª–∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏:

| –ò–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞                          | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è                   |
|----------------------------------------|--------------------------------------------------------------------------|--------------|-----------------------------------|
| `OAUTH_TOKEN_ARG`                      | OAuth-—Ç–æ–∫–µ–Ω –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ API Yandex 360.                         | –î–∞           | `y0_AgAAAA...`                   |
| `ORGANIZATION_ID_ARG`                  | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ Yandex 360 (—Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–π).                  | –î–∞           | `123456`                          |
| `APPLICATION_CLIENT_ID_ARG`            | Client ID –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤.         | –î–∞           | `abc123...`                       |
| `APPLICATION_CLIENT_SECRET_ARG`        | Client Secret –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤.     | –î–∞           | `xyz789...`                       |
| `DELEGATE_ALIAS`                       | –õ–æ–≥–∏–Ω –¥–µ–ª–µ–≥–∞—Ç–∞ (–±–µ–∑ –¥–æ–º–µ–Ω–∞) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —è—â–∏–∫–∞–º.         | –î–∞           | `i.petrov`                        |
| `DELEGATE_DOMAIN`                      | –î–æ–º–µ–Ω –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è email –¥–µ–ª–µ–≥–∞—Ç–∞.                        | –î–∞           | `example.ru`                      |
| `DELEGATE_PASSWORD`                    | –ü–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –¥–µ–ª–µ–≥–∞—Ç–∞ –∫ IMAP.                            | –î–∞           | `app_password_here`               |
| `CHECK_DIR`                            | –ö–∞—Ç–∞–ª–æ–≥ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ (checkpoint —Ñ–∞–π–ª—ã).      | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `mailbox_checkpoints`) | `mailbox_checkpoints` |
| `MESSAGE_ID_FILE_NAME`                 | –ò–º—è —Ñ–∞–π–ª–∞ —Å `Message-ID` –¥–ª—è –ø–æ–∏—Å–∫–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏).  | –ù–µ—Ç          | `message_ids.csv`                 |
| `MAILBOXES_TO_SEARCH_FILE_NAME`        | –ò–º—è —Ñ–∞–π–ª–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏). | –ù–µ—Ç          | `mailboxes.csv`                   |
| `DRY_RUN`                              | –†–µ–∂–∏–º "—Å—É—Ö–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞" (`true` –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è, `false` –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ). | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`) | `true` –∏–ª–∏ `false` |

### –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
| –ê—Ä–≥—É–º–µ–Ω—Ç   | –û–ø–∏—Å–∞–Ω–∏–µ                                           | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è           |
|------------|----------------------------------------------------|--------------|---------------------------|
| `--id`     | `Message-ID` –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.                 | –ù–µ—Ç          | `<123@domain.com>`        |
| `--date`   | –î–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `DD-MM-YYYY`.             | –ù–µ—Ç          | `01-10-2023`              |

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`OAUTH_TOKEN_ARG`, `ORGANIZATION_ID_ARG`, `APPLICATION_CLIENT_ID_ARG`, `APPLICATION_CLIENT_SECRET_ARG`, `DELEGATE_ALIAS`, `DELEGATE_DOMAIN`, `DELEGATE_PASSWORD`) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞–Ω—ã. –ü—Ä–∏ –∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –∫–æ–¥–æ–º `1`.
- **–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã `DD-MM-YYYY`, `DD.MM.YYYY`, `DD/MM/YYYY`, `YYYY-MM-DD`, `YYYY/MM/DD`, `MM/DD/YYYY`, `DD-MM-YY`, `YYYY.MM.DD`, –∞ —Ç–∞–∫–∂–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `25 December 2023`).
- **DRY_RUN**: –ï—Å–ª–∏ `DRY_RUN=true`, —Å–∫—Ä–∏–ø—Ç —Ç–æ–ª—å–∫–æ –∏–º–∏—Ç–∏—Ä—É–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ, –ª–æ–≥–∏—Ä—É—è –¥–µ–π—Å—Ç–≤–∏—è –±–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ–ª–µ–≥–∞—Ç–∞**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ª–µ–≥–∞—Ç–∞ —Å–º. –≤ [DELEGATE_SETTINGS.md](DELEGATE_SETTINGS.md)
- **–§–∞–π–ª `.env`**: –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ `.env`:
  ```
  OAUTH_TOKEN_ARG=y0_AgAAAA...
  ORGANIZATION_ID_ARG=123456
  APPLICATION_CLIENT_ID_ARG=abc123...
  APPLICATION_CLIENT_SECRET_ARG=xyz789...
  DELEGATE_ALIAS=i.petrov
  DELEGATE_DOMAIN=example.ru
  DELEGATE_PASSWORD=app_password_here
  CHECK_DIR=mailbox_checkpoints
  MESSAGE_ID_FILE_NAME=message_ids.csv
  MAILBOXES_TO_SEARCH_FILE_NAME=mailboxes.csv
  DRY_RUN=false
  ```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–ø—É—Å–∫—É —Å–∫—Ä–∏–ø—Ç–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –Ø–Ω–¥–µ–∫—Å 360 API
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω OAuth –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å 360 —á–µ—Ä–µ–∑ API.
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ä–≤–≤–∏—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —è—â–∏–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª IMAP.

### –ü–æ–ª—É—á–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ OAuth –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –Ø–Ω–¥–µ–∫—Å 360

1. –î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≥–µ–Ω–µ—Ä–∏–æ–≤–∞—Ç—å OAuth —Ç–æ–∫–µ–Ω –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ API –Ø–Ω–¥–µ–∫—Å 360. –¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –≤—ã–ø–æ–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å 360. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](https://yandex.ru/dev/id/doc/ru/register-client). –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞:
    * –∑–∞—Ö–æ–¥–∏–º –Ω–∞ https://oauth.yandex.ru/client/new/. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º—Å—è –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å 360.
    * –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è –≤ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
        - –ü–æ–ª–µ "–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞" - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ.
        - –í–∫–ª—é—á–∞–µ–º –≥–∞–ª–æ—á–∫—É "–í–µ–± —Å–µ—Ä–≤–∏—Å—ã"
        - –í –ø–æ–ª–µ `Redirect URL` –≤–≤–æ–¥–∏–º `https://oauth.yandex.ru/verification_code`
        - –í —Ä–∞–∑–¥–µ–ª–µ "–ü–æ—á—Ç–∞ –¥–ª—è —Å–≤—è–∑–∏" —É–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–æ–π email.
          
        <img src="images/create_oauth_app_00.jpg" width="800">
        
    * –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ç–æ–∫–µ–Ω–∞. –î–ª—è —ç—Ç–æ–≥–æ –≤ —Ä–∞–∑–¥–µ–ª–µ "–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º" –∏—â–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:
        | –ò–º—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è | –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å |
        |----------------|----------|
        | directory:read_users |  —á–∏—Ç–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö |
        | ya360_security:audit_log_mail | —á—Ç–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∞—É–¥–∏—Ç –ª–æ–≥–∞ –ü–æ—á—Ç—ã |
        | ya360_security:service_applications_read | —á—Ç–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π |
        | ya360_security:service_applications_write | —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π |
        
        <img src="images/oauth_permissions.jpg" width="800">
        
    * –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ".
    * –°–≤–æ–π—Å—Ç–≤–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ "–ú–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è". –ò—â–µ–º —Ä–∞–∑–¥–µ–ª —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∫–æ–ø–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É –∏–∑ –ø–æ–ª—è "ClientID":
      
        <img src="images/app_id.jpg" width="800">
        
    * –í —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ —Å–æ–∑–∞–¥–µ–º —Å—Ç—Ä–æ–∫—É –≤–∏–¥–∞ `https://oauth.yandex.ru/authorize?response_type=token&client_id=<–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è>` –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º –≤ –Ω–µ–π –≤–º–µ—Å—Ç–æ `<–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è>` —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ClientID –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—É–Ω–∫—Ç–∞. 
    –í—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–ª—É—á–∏–≤—à—É—é—Å—è —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä –∏ –Ω–∞–∂–∏–º–∞–µ–º "Enter".
    * –í –æ–∫–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∞–≤ —Ç–æ–∫–µ–Ω–∞. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ **–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –í–õ–ê–î–ï–õ–¨–¶–ê –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏** (–µ—Å–ª–∏ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, —Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –ø–æ–ª—É—á–∏—Ç –∑–∞—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —É –¥–∞–Ω–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏).
    –ù–∞–∂–∏–º–∞–µ–º "–í–æ–π—Ç–∏ –∫–∞–∫" –∏ –ø–æ–ª—É—á–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞. 
> [!WARNING]  
> –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –Ω–∞–¥—ë–∂–Ω–æ–º –º–µ—Å—Ç–µ.

2. –ü–æ–ª—É—á–∏—Ç—å ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ –Ø–Ω–¥–µ–∫—Å 360. –î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–π—Ç–∏ –≤ [–∫–æ–Ω—Å–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è](admin.yandex.ru) –∏ –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±—É–¥–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –Ω–æ–º–µ—Ä.
   
   <img src="images/org_id.jpg" width="400">
        
3. –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ OAuth —Ç–æ–∫–µ–Ω –∏ Org ID –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ —Ñ–∞–π–ª–µ `.env` –≤ —Ç–æ–º –∂–µ –∫–∞—Ç–∞–ª–æ–≥–µ, —á—Ç–æ –∏ —Å–∞–º–∏ —Å–∫—Ä–∏–ø—Ç—ã. –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω—É–∂–Ω–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ API –Ø–Ω–¥–µ–∫—Å 360.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: –≤–µ—Ä—Å–∏—è 3.9 –∏–ª–∏ –≤—ã—à–µ
- **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: Linux, macOS, Windows
- **–ü–∞–º—è—Ç—å**: –º–∏–Ω–∏–º—É–º 512 –ú–ë RAM
- **–°–µ—Ç—å**: –¥–æ—Å—Ç—É–ø –∫ `api360.yandex.net`, `oauth.yandex.ru`, `imap.yandex.ru`
- **–ü—Ä–∞–≤–∞**: –ø—Ä–∞–≤–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ Yandex 360 (–¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### Linux/macOS:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Python
python3 --version

# –ï—Å–ª–∏ Python –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –≤–µ—Ä—Å–∏—è < 3.7:
# Ubuntu/Debian:
sudo apt update && sudo apt install python3 python3-pip

# macOS (—Å Homebrew):
brew install python3

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd /path/to/project

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip3 install -r requirements.txt

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
pip3 install python-dotenv requests python-dateutil aioimaplib
```

#### Windows:

```powershell
# –°–∫–∞—á–∞–π—Ç–µ Python —Å python.org (–≤–µ—Ä—Å–∏—è 3.7+)
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω pip

# –û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –∏–ª–∏ CMD –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
cd C:\path\to\project

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
pip install python-dotenv requests python-dateutil aioimaplib
```

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –∑–∞–ø—É—Å–∫–∞

#### –ü—Ä–∏–º–µ—Ä 1: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–¥–∞–≤–Ω–µ–≥–æ —Å–ø–∞–º–∞

```bash
# –®–∞–≥ 1: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python del_message_v3.py --id "<spam@evil.com>" --date "24-11-2024"
# –í –º–µ–Ω—é: –≤—ã–±–µ—Ä–∏—Ç–µ 1 ‚Üí 8 (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å audit log) ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

# –®–∞–≥ 2: –†–µ–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
# –ò–∑–º–µ–Ω–∏—Ç–µ DRY_RUN=false –≤ .env, –∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∑–∞–ø—É—Å–∫
```

#### –ü—Ä–∏–º–µ—Ä 2: –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —è—â–∏–∫–æ–≤

```bash
python del_message_v3.py --id "<confidential@company.com>" --date "01-06-2024"
# –í –º–µ–Ω—é:
#   1 ‚Üí 4 (—É–∫–∞–∂–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —è—â–∏–∫–æ–≤) ‚Üí boss@company.ru, cfo@company.ru
#   ‚Üí 9 (—É–¥–∞–ª–∏—Ç—å –±–µ–∑ audit log)
```

#### –ü—Ä–∏–º–µ—Ä 3: –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –≤—Å–µ—Ö —è—â–∏–∫–æ–≤

```bash
python del_message_v3.py --id "<phishing@attacker.com>" --date "20-11-2024"
# –í –º–µ–Ω—é:
#   1 ‚Üí 4 (–≤–≤–µ–¥–∏—Ç–µ *) ‚Üí 9 (—É–¥–∞–ª–∏—Ç—å –∏–∑ –≤—Å–µ—Ö —è—â–∏–∫–æ–≤)
```

#### –ü—Ä–∏–º–µ—Ä 4: –ü–æ–∏—Å–∫ —Å —à–∏—Ä–æ–∫–∏–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –¥–∞—Ç

```bash
python del_message_v3.py --id "<old@archive.com>" --date "15-11-2024"
# –í –º–µ–Ω—é:
#   1 ‚Üí 3 (–≤–≤–µ–¥–∏—Ç–µ 7 –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ ¬±7 –¥–Ω–µ–π) ‚Üí 8 –∏–ª–∏ 9
```

#### –ü—Ä–∏–º–µ—Ä 5: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ checkpoint

```bash
python del_message_v3.py
# –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é:
#   2 (Restore mailbox configuration) ‚Üí —É–∫–∞–∂–∏—Ç–µ —Ñ–∞–π–ª –∏–ª–∏ Enter –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞:

1. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –≤—ã–≤–æ–¥–æ–º –≤ –∫–æ–Ω—Å–æ–ª—å:**
   ```
   12:34:56 INFO: –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É 50 –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤
   12:35:02 INFO: [1/50] –û–±—Ä–∞–±–æ—Ç–∫–∞ user1@example.ru...
   12:35:04 INFO: ‚úì user1@example.ru: –Ω–∞–π–¥–µ–Ω–æ –∏ —É–¥–∞–ª–µ–Ω–æ 2 —Å–æ–æ–±—â–µ–Ω–∏—è
   ```

2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥-—Ñ–∞–π–ª –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
   ```bash
   # –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
   tail -f delete_messages.log
   ```

3. **–î–æ–∂–¥–∏—Ç–µ—Å—å —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞:**
   ```
   ====================================================================================================
   –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –û –ü–û–ò–°–ö–ï –ò –£–î–ê–õ–ï–ù–ò–ò –°–û–û–ë–©–ï–ù–ò–Ø
   ====================================================================================================
   ...
   ```

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ—Ç—á–µ—Ç:**
   ```bash
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª
   python del_message_v3.py --id "<msg@site.com>" --date "25-11-2024" | tee report_$(date +%Y%m%d_%H%M%S).txt
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ checkpoint —Ñ–∞–π–ª—ã:**
   ```bash
   ls -lt mailbox_checkpoints/checkin_*.txt | head -5
   ```

3. **–ê—Ä—Ö–∏–≤–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏:**
   ```bash
   cp delete_messages.log archive/delete_messages_$(date +%Y%m%d).log
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é**:
   
   ### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
   
   –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
   
   ```
   ---------------------- Config params ----------------------
   Message ID: <example@mail.com>
   Message date: 25-11-2024
   Days to search from message date: 1
   Mailboxes to search: ['user@example.ru']
   ------------------------------------------------------------
   
   Select option:
   1. Enter search params manually.
   2. Restore mailbox configuration from checkin file.
   0. Exit
   ```
   
   **–û–ø—Ü–∏–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é:**
   - **1. Enter search params manually** - –ü–µ—Ä–µ—Ö–æ–¥ –≤ –º–µ–Ω—é —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞
   - **2. Restore mailbox configuration from checkin file** - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑ checkpoint —Ñ–∞–π–ª–∞
   - **0. Exit** - –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã
   
   ### –ú–µ–Ω—é —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   
   ```
   ---------------------- Set config params menu ----------------------
   1. Enter message id and date, separated by space.
   2. Enter message date (no more than 10 years old).
   3. Enter days to search from target day (default is +-1).
   4. Enter mailboxes to search.
   5. Clear search param.
   ----------------------- Delete message menu ------------------------
   8. Delete messages using audit log (mailboxes list will filled from log).
   9. Delete messages WITHOUT using audit log. (using pre-filled mailboxes list)
   ------------------------ Exit to main menu -------------------------
   0. Exit to main menu.
   ```
   
   **–°–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞:**
   - **1. Enter message id and date** - –í–≤–æ–¥ Message-ID —Å–æ–æ–±—â–µ–Ω–∏—è (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å –¥–∞—Ç–æ–π —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª)
     - –§–æ—Ä–º–∞—Ç: `<message-id@domain.com>` –∏–ª–∏ `<message-id@domain.com> 25-11-2024`
   - **2. Enter message date** - –í–≤–æ–¥ –¥–∞—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–µ —Å—Ç–∞—Ä—à–µ 10 –ª–µ—Ç)
     - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: `DD-MM-YYYY`, `DD.MM.YYYY`, `DD/MM/YYYY`, `YYYY-MM-DD`, –∏ –¥—Ä.
   - **3. Enter days to search** - –£–∫–∞–∑–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–Ω–µ–π –¥–ª—è –ø–æ–∏—Å–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ¬±1 –¥–µ–Ω—å)
     - –ó–Ω–∞—á–µ–Ω–∏–µ: 0-90 –¥–Ω–µ–π
   - **4. Enter mailboxes to search** - –£–∫–∞–∑–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
     - –§–æ—Ä–º–∞—Ç: `user1@domain.com, user2@domain.com` (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏: –∑–∞–ø—è—Ç–∞—è –∏–ª–∏ —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π)
     - –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `*` - –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
     - –ü—Ä–æ–±–µ–ª - –æ—á–∏—Å—Ç–∫–∞ —Å–ø–∏—Å–∫–∞
   - **5. Clear search param** - –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞
   
   **–°–µ–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π:**
   - **8. Delete messages using audit log** - –£–¥–∞–ª–µ–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤
     - –°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ª–æ–≥–∏ –∞—É–¥–∏—Ç–∞ API Yandex 360
     - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Å–µ —è—â–∏–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
     - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π
   - **9. Delete messages WITHOUT using audit log** - –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∑–∞—Ä–∞–Ω–µ–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —è—â–∏–∫–æ–≤
     - –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ (–æ–ø—Ü–∏—è 4)
     - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π
     - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å—Å–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–∏–º–≤–æ–ª `*`)
   
   **–í–æ–∑–≤—Ä–∞—Ç:**
   - **0. Exit to main menu** - –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–°–∫—Ä–∏–ø—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö –∑–∞–¥–∞—á.

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–¥–∞–≤–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (< 90 –¥–Ω–µ–π)

**–ó–∞–¥–∞—á–∞:** –£–¥–∞–ª–∏—Ç—å —Å–ø–∞–º-—Ä–∞—Å—Å—ã–ª–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤—Å–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ 2 –¥–Ω—è –Ω–∞–∑–∞–¥.

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   python del_message_v3.py
   ```

2. –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ `1` (Enter search params manually)

3. –í –º–µ–Ω—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
   - –í—ã–±–µ—Ä–∏—Ç–µ `1` - –≤–≤–µ–¥–∏—Ç–µ Message-ID: `<spam123@badsite.com>`
   - –í—ã–±–µ—Ä–∏—Ç–µ `2` - –≤–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É: `23-11-2024`
   - –í—ã–±–µ—Ä–∏—Ç–µ `8` - Delete messages using audit log

4. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ó–∞–ø—Ä–æ—Å–∏—Ç –ª–æ–≥–∏ –∞—É–¥–∏—Ç–∞ Yandex 360
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç –≤—Å–µ –ø–æ—á—Ç–æ–≤—ã–µ —è—â–∏–∫–∏, –ø–æ–ª—É—á–∏–≤—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –∫–∞–∂–¥–æ–º—É —è—â–∏–∫—É —á–µ—Ä–µ–∑ IMAP
   - –ù–∞–π–¥–µ—Ç –∏ —É–¥–∞–ª–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
   - –í—ã–≤–µ–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –∏–∑ –≤—Å–µ—Ö –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤, –∫—É–¥–∞ –æ–Ω–æ –ø–æ–ø–∞–ª–æ.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (> 90 –¥–Ω–µ–π)

**–ó–∞–¥–∞—á–∞:** –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —è—â–∏–∫–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥.

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏:
   ```bash
   python del_message_v3.py --id "<confidential@company.com>" --date "25-05-2024"
   ```

2. –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ `1`

3. –í –º–µ–Ω—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
   - –í—ã–±–µ—Ä–∏—Ç–µ `4` - –≤–≤–µ–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —è—â–∏–∫–æ–≤: `boss@company.ru, cfo@company.ru, ceo@company.ru`
   - –í—ã–±–µ—Ä–∏—Ç–µ `9` - Delete messages WITHOUT using audit log

4. –°–∫—Ä–∏–ø—Ç:
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —É–∫–∞–∑–∞–Ω–Ω—ã–º —è—â–∏–∫–∞–º
   - –í—ã–ø–æ–ª–Ω–∏—Ç –ø–æ–∏—Å–∫ –ø–æ Message-ID –∏ –¥–∞—Ç–µ
   - –£–¥–∞–ª–∏—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π –ª–æ–≥–∏ –∞—É–¥–∏—Ç–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –ø–æ—ç—Ç–æ–º—É —Å–ø–∏—Å–æ–∫ —è—â–∏–∫–æ–≤ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –≤—Å–µ—Ö —è—â–∏–∫–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**–ó–∞–¥–∞—á–∞:** –£–¥–∞–ª–∏—Ç—å —Ñ–∏—à–∏–Ω–≥–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –≤—Å–µ—Ö –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (1000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   python del_message_v3.py
   ```

2. –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ `1`

3. –í –º–µ–Ω—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
   - –í—ã–±–µ—Ä–∏—Ç–µ `1` - –≤–≤–µ–¥–∏—Ç–µ Message-ID –∏ –¥–∞—Ç—É: `<phishing@evil.com> 24-11-2024`
   - –í—ã–±–µ—Ä–∏—Ç–µ `4` - –≤–≤–µ–¥–∏—Ç–µ —Å–∏–º–≤–æ–ª `*` –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –í—ã–±–µ—Ä–∏—Ç–µ `9` - Delete messages WITHOUT using audit log

4. –°–∫—Ä–∏–ø—Ç:
   - –ü–æ–ª—É—á–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Yandex 360 API
   - –û–±—Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ —è—â–∏–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–¥–æ 5 –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
   - –£–¥–∞–ª–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤–µ–∑–¥–µ, –≥–¥–µ –æ–Ω–∏ –Ω–∞–π–¥–µ–Ω—ã
   - –í—ã–≤–µ–¥–µ—Ç —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —è—â–∏–∫–æ–≤.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º (Dry Run)

**–ó–∞–¥–∞—á–∞:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤ –∫–∞–∫–∏—Ö —è—â–∏–∫–∞—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ, –±–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è.

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:**

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–µ–∂–∏–º dry-run –≤ —Ñ–∞–π–ª–µ `.env`:
   ```env
   DRY_RUN=true
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–±—ã—á–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É —É–¥–∞–ª–µ–Ω–∏—è (–ª—é–±–æ–π –∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤—ã—à–µ)

3. –°–∫—Ä–∏–ø—Ç:
   - –í—ã–ø–æ–ª–Ω–∏—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ø–æ–∏—Å–∫)
   - –ù–ï –±—É–¥–µ—Ç —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ó–∞–ø–∏—à–µ—Ç –≤ –ª–æ–≥, —á—Ç–æ –±—ã–ª–æ –±—ã —É–¥–∞–ª–µ–Ω–æ
   - –í—ã–≤–µ–¥–µ—Ç –æ—Ç—á–µ—Ç –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

4. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `DRY_RUN=false`
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ dry-run –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º!

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ó–∞–¥–∞—á–∞:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —è—â–∏–∫–∞–º –ø–æ—Å–ª–µ —Å–±–æ—è.

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   python del_message_v3.py
   ```

2. –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ `2` (Restore mailbox configuration from checkin file)

3. –°–∫—Ä–∏–ø—Ç:
   - –ù–∞–π–¥–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π checkpoint —Ñ–∞–π–ª –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `mailbox_checkpoints/`
   - –ü—Ä–µ–¥–ª–æ–∂–∏—Ç –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - –ø–æ—Å–ª–µ–¥–Ω–∏–π)
   - –û—Ç–æ–±—Ä–∞–∑–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
   - –ó–∞–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

4. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —è—â–∏–∫–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞
   - –í—ã–≤–µ–¥–µ—Ç –æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**Checkpoint —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –¥–∞—Ç

**–ó–∞–¥–∞—á–∞:** –ù–∞–π—Ç–∏ –∏ —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ —Ç–æ—á–Ω–∞—è –¥–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ (–∏–∑–≤–µ—Å—Ç–µ–Ω —Ç–æ–ª—å–∫–æ –¥–∏–∞–ø–∞–∑–æ–Ω).

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   python del_message_v3.py
   ```

2. –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ `1`

3. –í –º–µ–Ω—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
   - –í—ã–±–µ—Ä–∏—Ç–µ `1` - –≤–≤–µ–¥–∏—Ç–µ Message-ID: `<unknown-date@site.com>`
   - –í—ã–±–µ—Ä–∏—Ç–µ `2` - –≤–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω—É—é –¥–∞—Ç—É: `20-11-2024`
   - –í—ã–±–µ—Ä–∏—Ç–µ `3` - –≤–≤–µ–¥–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–Ω–µ–π: `5` (–±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å ¬±5 –¥–Ω–µ–π –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã)
   - –í—ã–±–µ—Ä–∏—Ç–µ `8` –∏–ª–∏ `9` - –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

4. –°–∫—Ä–∏–ø—Ç:
   - –í—ã–ø–æ–ª–Ω–∏—Ç –ø–æ–∏—Å–∫ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 15-25 –Ω–æ—è–±—Ä—è 2024
   - –ù–∞–π–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–æ—á–Ω–∞—è –¥–∞—Ç–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞
   - –£–¥–∞–ª–∏—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–æ–ø–∏–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω - 90 –¥–Ω–µ–π –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã.

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ó–∞—â–∏—Ç–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ `.env` —Ñ–∞–π–ª –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π
   - –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ OAuth —Ç–æ–∫–µ–Ω—ã
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ `.env` —Ñ–∞–π–ª—É: `chmod 600 .env`

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º:**
   - **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DRY_RUN=true` –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—á–µ—Ç –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ø–∏—Å–æ–∫ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
   - –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

3. **Checkpoint —Ñ–∞–π–ª—ã:**
   - –†–µ–≥—É–ª—è—Ä–Ω–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ `mailbox_checkpoints/`
   - –ù–µ —É–¥–∞–ª—è–π—Ç–µ checkpoint —Ñ–∞–π–ª—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π
   - –•—Ä–∞–Ω–∏—Ç–µ checkpoint —Ñ–∞–π–ª—ã –º–∏–Ω–∏–º—É–º 30 –¥–Ω–µ–π

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π:**
   - –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å >100 —è—â–∏–∫–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ü–∏—é 9 (–±–µ–∑ audit log) —Å —Å–∏–º–≤–æ–ª–æ–º `*`
   - –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ –ø–µ—Ä–∏–æ–¥—ã –Ω–∏–∑–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:**
   - –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π >90 –¥–Ω–µ–π –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ü–∏—é 9
   - –ó–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤
   - –†–∞–∑–±–∏–≤–∞–π—Ç–µ –±–æ–ª—å—à–∏–µ —Å–ø–∏—Å–∫–∏ –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ 50-100 —è—â–∏–∫–æ–≤

3. **–î–∏–∞–ø–∞–∑–æ–Ω –ø–æ–∏—Å–∫–∞:**
   - –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–Ω–µ–π –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–Ω—É—é –¥–∞—Ç—É, –µ—Å–ª–∏ –æ–Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞
   - –£–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### üìä –†–∞–±–æ—Ç–∞ —Å –æ—Ç—á–µ—Ç–∞–º–∏

1. **–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   - –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ—à–∏–±–æ–∫
   - –û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —è—â–∏–∫–∏, –≥–¥–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

2. **–õ–æ–≥–∏:**
   - –ò–∑—É—á–∞–π—Ç–µ `delete_messages.log` –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º
   - –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç `x-request-id` –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Yandex
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ backup —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤

### üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

1. **–û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è IMAP:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `DELEGATE_PASSWORD` (–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–µ–ª–µ–≥–∞—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–æ–º–µ–Ω–∞ –≤ `DELEGATE_DOMAIN`

2. **–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Message-ID (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–≥–ª–æ–≤—ã–µ —Å–∫–æ–±–∫–∏ `<>`)
   - –£–≤–µ–ª–∏—á—å—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–Ω–µ–π –ø–æ–∏—Å–∫–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞—Ç–∞ —É–∫–∞–∑–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —è—â–∏–∫–µ

3. **–û—à–∏–±–∫–∏ API:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è OAuth —Ç–æ–∫–µ–Ω–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `ORGANIZATION_ID_ARG`

### üìã –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:**

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dry-run —Ä–µ–∂–∏–º
   echo "DRY_RUN=true" >> .env
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ test —Ä–µ–∂–∏–º–µ
   python del_message_v3.py --id "<test@example.com>" --date "25-11-2024"
   ```

3. **–ê–Ω–∞–ª–∏–∑:**
   - –ò–∑—É—á–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å–ø–∏—Å–∫–∞ —è—â–∏–∫–æ–≤

4. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**
   ```bash
   # –û—Ç–∫–ª—é—á–∏—Ç–µ dry-run
   sed -i '' 's/DRY_RUN=true/DRY_RUN=false/' .env
   
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
   python del_message_v3.py --id "<test@example.com>" --date "25-11-2024"
   ```

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ checkpoint —Ñ–∞–π–ª—ã
   - –°–¥–µ–ª–∞–π—Ç–µ –∑–∞–ø–∏—Å—å –≤ –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π

### üö® –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

- ‚ö†Ô∏è **–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è EXPUNGE —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ–ª—å–∑—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- ‚ö†Ô∏è **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–∞–≤ –≤–ª–∞–¥–µ–ª—å—Ü–∞** –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ Yandex 360
- ‚ö†Ô∏è **–ù–µ –ø—Ä–µ—Ä—ã–≤–∞–π—Ç–µ —Ä–∞–±–æ—Ç—É —Å–∫—Ä–∏–ø—Ç–∞** –≤–æ –≤—Ä–µ–º—è —É–¥–∞–ª–µ–Ω–∏—è - —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚ö†Ô∏è **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ª–µ–≥–∞—Ç–∞** –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–ö–æ–Ω—Å–æ–ª—å**: –°–æ–æ–±—â–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è INFO —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ (—Ñ–æ—Ä–º–∞—Ç: `HH:MM:SS INFO: –°–æ–æ–±—â–µ–Ω–∏–µ`).
- **–§–∞–π–ª**: –°–æ–æ–±—â–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è DEBUG –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `delete_messages.log`, —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 1 –ú–ë (—Ö—Ä–∞–Ω–∏—Ç—Å—è 5 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π).
- **–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–µ–π**: `–ì–ì–ì–ì-–ú–ú-–î–î –ß–ß:–ú–ú:–°–°.–ú–°–° –£–†–û–í–ï–ù–¨: –°–æ–æ–±—â–µ–Ω–∏–µ`
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ª–æ–≥–æ–≤**:
  - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ API —Å request-id
  - –î–µ—Ç–∞–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π IMAP
  - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏—è
  - –û—à–∏–±–∫–∏ —Å –ø–æ–ª–Ω—ã–º stack trace

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- **–û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ `ORGANIZATION_ID_ARG` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º, —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –∫–æ–¥–æ–º `1`.
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ª–µ–≥–∞—Ç–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**: –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ IMAP —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–µ–ª–µ–≥–∞—Ç–∞. –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ—É—Å–ø–µ—à–Ω–æ (–Ω–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å, –ª–æ–≥–∏–Ω –∏–ª–∏ –¥–æ–º–µ–Ω), —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –∫–æ–¥–æ–º `1` –∏ –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.
- **–û—à–∏–±–∫–∏ –≤–≤–æ–¥–∞**: –ù–µ–≤–µ—Ä–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç—ã –∏–ª–∏ email-–∞–¥—Ä–µ—Å–∞ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–µ.
- **–û—à–∏–±–∫–∏ API/IMAP**: –û—à–∏–±–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ IMAP –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ (—Ç–∏–ø –æ—à–∏–±–∫–∏, —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞).
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –ü–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∞–º –∞—É–¥–∏—Ç–∞ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π –±–µ–∑ –≤—Ä—É—á–Ω—É—é –∑–∞–¥–∞–Ω–Ω—ã—Ö –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤.

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–î–∏–∞–ø–∞–∑–æ–Ω –ø–æ–∏—Å–∫–∞ –ø–æ –¥–∞—Ç–∞–º**: –ú–∞–∫—Å–∏–º—É–º ¬±90 –¥–Ω–µ–π –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è**: –ù–µ –±–æ–ª–µ–µ 20 –ª–µ—Ç –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –¥–ª—è audit log**: 90 –¥–Ω–µ–π (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ API Yandex 360)
- **–î–∞—Ç—ã –∏–∑ –±—É–¥—É—â–µ–≥–æ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API

- **Audit Log:**
  - –î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 90 –¥–Ω–µ–π
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –æ—Ç–≤–µ—Ç–µ: 100 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
  - –¢—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ OAuth —Ç–æ–∫–µ–Ω–∞

- **Yandex 360 API:**
  - –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É (rate limiting)
  - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –≤–ª–∞–¥–µ–ª—å—Ü–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

- **IMAP:**
  - –ú–∞–∫—Å–∏–º—É–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π: 5 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `MAX_PARALLEL_THREADS`)
  - Timeout –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ
  - –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (basic authentication)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π:**
  - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è —Ç–∏–ø–∞ `message_receive`
  - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã `FILTERED_EVENTS` –∏ `FILTERED_MAILBOXES` –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –≤ –∫–æ–¥–µ
  - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞

- **–ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π:**
  - –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ Message-ID –∏ –¥–∞—Ç–µ
  - –ù–µ—Ç –ø–æ–∏—Å–∫–∞ –ø–æ –¥—Ä—É–≥–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º (—Ç–µ–º–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∏ —Ç.–¥.)
  - –ü–æ–∏—Å–∫ –≤–æ –≤—Å–µ—Ö –ø–∞–ø–∫–∞—Ö —è—â–∏–∫–∞ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞–ø–∫–æ–π)

- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
  - –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –æ–¥–Ω–æ–º—É —è—â–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
  - –ú–∞–∫—Å–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ–µ
  - –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: 2 —Å–µ–∫—É–Ω–¥—ã

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
  - –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
  - –î–µ–ª–µ–≥–∞—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

- **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
  - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ 1000 —è—â–∏–∫–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫
  - –ü—Ä–∏ –±–æ–ª—å—à–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤–æ–∑–º–æ–∂–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã –∏ –æ—à–∏–±–∫–∏

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)

### –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ú–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è?**
A: –ù–µ—Ç, –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã EXPUNGE —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ. Yandex –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DRY_RUN=true` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!

**Q: –ö–∞–∫ –¥–æ–ª–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ 100 —è—â–∏–∫–æ–≤?**
A: –ü—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ (5 –ø–æ—Ç–æ–∫–æ–≤) —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ 10-15 –º–∏–Ω—É—Ç, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–∂–¥–æ–º —è—â–∏–∫–µ.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π?**
A: –°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ Message-ID –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫. –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∫–æ–¥.

**Q: –ù—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å checkpoint —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é?**
A: –ù–µ—Ç, checkpoint —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –í–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –≤ `.env`.

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É —Å–∫—Ä–∏–ø—Ç –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ö–æ—Ç—è —è —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –æ–Ω–æ –µ—Å—Ç—å?**
A: –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- Message-ID —É–∫–∞–∑–∞–Ω –Ω–µ–≤–µ—Ä–Ω–æ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —É–≥–ª–æ–≤—ã—Ö —Å–∫–æ–±–æ–∫ `<>`)
- –î–∞—Ç–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–π (—É–≤–µ–ª–∏—á—å—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–Ω–µ–π)
- –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤–µ –∏–ª–∏ –±—ã–ª–æ —É–∂–µ —É–¥–∞–ª–µ–Ω–æ
- IMAP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø–∞–ø–∫–∞–º

**Q: –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—à–∏–±–∫–∞ "Required environment vars not provided"?**
A: –í —Ñ–∞–π–ª–µ `.env` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã".

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ Windows?**
A: –î–∞, —Å–∫—Ä–∏–ø—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º —Å Windows. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Python 3.7+ –∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`.

**Q: –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Message-ID —Å–æ–æ–±—â–µ–Ω–∏—è?**
A: 
1. –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç—ã –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –ù–∞–∂–º–∏—Ç–µ "–ï—â–µ" ‚Üí "–°–ª—É–∂–µ–±–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏"
3. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `Message-ID:`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–≤–∫–ª—é—á–∞—è —É–≥–ª–æ–≤—ã–µ —Å–∫–æ–±–∫–∏)

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è IMAP?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–µ–ª–µ–≥–∞—Ç–∞ (`DELEGATE_PASSWORD`)
2. –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–µ–ª–µ–≥–∞—Ç–∞ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
3. –§–æ—Ä–º–∞—Ç –¥–æ–º–µ–Ω–∞ –≤ `DELEGATE_DOMAIN` (–±–µ–∑ @)
4. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ `imap.yandex.ru:993`

### –í–æ–ø—Ä–æ—Å—ã –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

**Q: –ì–¥–µ –≤–∑—è—Ç—å OAuth —Ç–æ–∫–µ–Ω?**
A: –°–º. —Ä–∞–∑–¥–µ–ª "–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ OAuth –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –Ø–Ω–¥–µ–∫—Å 360" –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ. –¢–æ–∫–µ–Ω –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ø–Ω–¥–µ–∫—Å.OAuth.

**Q: –ß—Ç–æ —Ç–∞–∫–æ–µ "–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" –¥–ª—è –¥–µ–ª–µ–≥–∞—Ç–∞?**
A: –≠—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–∫–∫–∞—É–Ω—Ç–∞ –Ø–Ω–¥–µ–∫—Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–æ–ª—å! –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: https://yandex.ru/support/id/authorization/app-passwords.html

**Q: –ù—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–¥–µ–ª–µ–≥–∞—Ç–∞?**
A: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞—à–∞ —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

**Q: –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤?**
A: –ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `MAX_PARALLEL_THREADS` –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ `del_message_v3.py`. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 3-10.

### –í–æ–ø—Ä–æ—Å—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ —Å–ø–∞–º–∞?**
A: –î–∞, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å wrapper-—Å–∫—Ä–∏–ø—Ç —Å –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –µ–≥–æ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ cron).

**Q: –ö–∞–∫ —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–∞–ø–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –∏–∑ –í—Ö–æ–¥—è—â–∏—Ö)?**
A: –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ - —Å–∫—Ä–∏–ø—Ç –∏—â–µ—Ç –≤–æ –≤—Å–µ—Ö –ø–∞–ø–∫–∞—Ö. –¢—Ä–µ–±—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ –¥—Ä—É–≥–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º (—Ç–µ–º–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å)?**
A: –ù–µ—Ç, —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∏—Å–∫ –ø–æ Message-ID. –î–ª—è –¥—Ä—É–≥–∏—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞.

**Q: –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ checkpoint —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã?**
A: –í—Å–µ checkpoint —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ, —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤ `CHECK_DIR` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `mailbox_checkpoints/`). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ls -la mailbox_checkpoints/` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.

### –í–æ–ø—Ä–æ—Å—ã –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**Q: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ .env —Ñ–∞–π–ª–µ?**
A: –§–∞–π–ª `.env` –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (`chmod 600 .env`) –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π. –î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OAuth —Ç–æ–∫–µ–Ω –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è IMAP?**
A: –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç basic authentication –¥–ª—è IMAP. –î–ª—è OAuth –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞.

**Q: –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –ª–∏ –ø–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã?**
A: –ù–µ—Ç, —Å–∫—Ä–∏–ø—Ç –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –í –ª–æ–≥–∞—Ö —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∫—Ä–∏–ø—Ç–∞

–°–∫—Ä–∏–ø—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    del_message_v3.py                        ‚îÇ
‚îÇ                    –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è                              ‚îÇ
‚îÇ  ‚Ä¢ –ó–∞–≥—Ä—É–∑–∫–∞ .env (dotenv)                                   ‚îÇ
‚îÇ  ‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤                                     ‚îÇ
‚îÇ  ‚Ä¢ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚ñº                 ‚ñº                 ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ   ‚îÇ ‚îÇ   API –º–æ–¥—É–ª—å     ‚îÇ ‚îÇ   IMAP –º–æ–¥—É–ª—å    ‚îÇ
‚îÇ      –º–µ–Ω—é        ‚îÇ ‚îÇ  (Yandex 360)    ‚îÇ ‚îÇ  (aioimaplib)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Ä¢ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é   ‚îÇ ‚îÇ ‚Ä¢ Audit Log      ‚îÇ ‚îÇ ‚Ä¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ    ‚îÇ
‚îÇ ‚Ä¢ –í–≤–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤‚îÇ ‚îÇ ‚Ä¢ Users API      ‚îÇ ‚îÇ ‚Ä¢ –ü–æ–∏—Å–∫          ‚îÇ
‚îÇ ‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚îÇ ‚îÇ ‚Ä¢ Delegation API ‚îÇ ‚îÇ ‚Ä¢ –£–¥–∞–ª–µ–Ω–∏–µ       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ                 ‚îÇ                 ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               Checkpoint —Å–∏—Å—Ç–µ–º–∞                            ‚îÇ
‚îÇ  ‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (checkin)                           ‚îÇ
‚îÇ  ‚Ä¢ –§–∏–∫—Å–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (checkout)                            ‚îÇ
‚îÇ  ‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ñ–æ–≤ (diff)                                    ‚îÇ
‚îÇ  ‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (restore)                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞                             ‚îÇ
‚îÇ  ‚Ä¢ ThreadPoolExecutor (–¥–æ 5 –ø–æ—Ç–æ–∫–æ–≤)                        ‚îÇ
‚îÇ  ‚Ä¢ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π IMAP (asyncio)                               ‚îÇ
‚îÇ  ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä—ã                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ                            ‚îÇ
‚îÇ  ‚Ä¢ –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ (INFO)                                  ‚îÇ
‚îÇ  ‚Ä¢ –§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏ (DEBUG)                                    ‚îÇ
‚îÇ  ‚Ä¢ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. SettingParams (dataclass)
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–æ–¥–µ—Ä–∂–∏—Ç:
- OAuth —Ç–æ–∫–µ–Ω –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã API
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ–ª–µ–≥–∞—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞ (message_id, date, days_diff, mailboxes)
- –ö—ç—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

#### 2. API –º–æ–¥—É–ª—å
–§—É–Ω–∫—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Yandex 360 API:
- `get_all_api360_users()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `fetch_audit_logs()` - –∑–∞–ø—Ä–æ—Å –ª–æ–≥–æ–≤ –∞—É–¥–∏—Ç–∞
- `get_mailbox_delegate_settings()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `update_mailbox_delegate_settings()` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### 3. IMAP –º–æ–¥—É–ª—å
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ø–æ—á—Ç–æ–π:
- `imap_connect()` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
- `search_and_delete_message()` - –ø–æ–∏—Å–∫ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- `temporary_delegate_and_delete_messages()` - —Ä–∞–±–æ—Ç–∞ —Å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —è—â–∏–∫–∞–º–∏

#### 4. Checkpoint —Å–∏—Å—Ç–µ–º–∞
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤:
- `save_mailbox_state()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (checkin)
- `save_checkout_state()` - —Ñ–∏–∫—Å–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (checkout)
- `create_diff_file()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ä–∞–∑–ª–∏—á–∏–π
- `restore_permissions_from_diff()` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ checkpoint

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è

```
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
   ‚îú‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ .env
   ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   ‚îî‚îÄ –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è IMAP –¥–µ–ª–µ–≥–∞—Ç–∞

2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
   ‚îú‚îÄ –í–≤–æ–¥ Message-ID
   ‚îú‚îÄ –í–≤–æ–¥ –¥–∞—Ç—ã –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
   ‚îî‚îÄ –£–∫–∞–∑–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —è—â–∏–∫–æ–≤ (–∏–ª–∏ *)

3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤
   ‚îú‚îÄ –ï—Å–ª–∏ use_log = true:
   ‚îÇ  ‚îú‚îÄ –ó–∞–ø—Ä–æ—Å audit logs
   ‚îÇ  ‚îî‚îÄ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —è—â–∏–∫–æ–≤
   ‚îî‚îÄ –ò–Ω–∞—á–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞

4. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—á—Ç–æ–≤–æ–≥–æ —è—â–∏–∫–∞ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ):
   ‚îú‚îÄ Checkin: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   ‚îú‚îÄ –í—Ä–µ–º–µ–Ω–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–µ–ª–µ–≥–∞—Ç–∞
   ‚îú‚îÄ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ IMAP
   ‚îú‚îÄ –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º
   ‚îú‚îÄ –£–¥–∞–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   ‚îú‚îÄ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –ø—Ä–∞–≤
   ‚îî‚îÄ Checkout: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
   ‚îú‚îÄ –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –≤—Å–µ–º —è—â–∏–∫–∞–º
   ‚îú‚îÄ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   ‚îî‚îÄ –í—ã–≤–æ–¥ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞

6. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
   ‚îî‚îÄ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤
```

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

#### Checkpoint —Ñ–∞–π–ª (checkin/checkout)
```
mailbox@domain.ru|delegation_enabled=true
mailbox@domain.ru|actors=[{"actorId":"12345","resourceId":"67890","roles":["shared_mailbox_owner"]}]
```

#### Diff —Ñ–∞–π–ª
```
Mailbox: office@company.ru
  Old delegation_enabled: true
  New delegation_enabled: true
  Old actors: [{"actorId":"11111",...}]
  New actors: [{"actorId":"11111",...},{"actorId":"22222",...}]
---
```

#### –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
```
====================================================================================================
–§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –û –ü–û–ò–°–ö–ï –ò –£–î–ê–õ–ï–ù–ò–ò –°–û–û–ë–©–ï–ù–ò–Ø
====================================================================================================
–ò—Å–∫–æ–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: <message-id@domain.com>

‚úì –°–û–û–ë–©–ï–ù–ò–ï –ù–ê–ô–î–ï–ù–û –ò –û–ë–†–ê–ë–û–¢–ê–ù–û:
  –ü–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫: user@domain.ru
  –ü–∞–ø–∫–∏: INBOX, Sent
  –°—Ç–∞—Ç—É—Å: –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ
  
–ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
  –í—Å–µ–≥–æ –ø–æ—á—Ç–æ–≤—ã—Ö —è—â–∏–∫–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏: N
  –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ –≤ —è—â–∏–∫–∞—Ö: M
  ...
====================================================================================================
```

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ `del_message_v3.py`:

```python
DEFAULT_IMAP_SERVER = "imap.yandex.ru"
DEFAULT_IMAP_PORT = 993
DEFAULT_360_API_URL = "https://api360.yandex.net"
DEFAULT_OAUTH_API_URL = "https://oauth.yandex.ru/token"
DEFAULT_DAYS_DIF = 1              # –î–∏–∞–ø–∞–∑–æ–Ω –¥–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
MAX_PARALLEL_THREADS = 5          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
MAX_RETRIES = 3                   # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
RETRIES_DELAY_SEC = 2             # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–∞–º–∏
MAIL_LOGS_MAX_RECORDS = 100       # –ó–∞–ø–∏—Å–µ–π –≤ –æ–¥–Ω–æ–º –æ—Ç–≤–µ—Ç–µ API
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:

1. **–£—Ä–æ–≤–µ–Ω—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
   - –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

2. **–£—Ä–æ–≤–µ–Ω—å API:**
   - –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ x-request-id –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ rate limiting

3. **–£—Ä–æ–≤–µ–Ω—å IMAP:**
   - Try-except –±–ª–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è—â–∏–∫–∞
   - –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–µ–ª–µ–≥–∞—Ç–∞ (finally)
   - –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ –Ω–∞ –æ–¥–Ω–æ–º —è—â–∏–∫–µ

4. **–£—Ä–æ–≤–µ–Ω—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏:**
   - –ò–∑–æ–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö
   - –°–±–æ—Ä –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—É—Å–ø–µ—à–Ω—ã—Ö –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–§–∞–∫—Ç–æ—Ä—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å:**

| –§–∞–∫—Ç–æ—Ä | –í–ª–∏—è–Ω–∏–µ | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
|--------|---------|-------------|
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —è—â–∏–∫–æ–≤ | –õ–∏–Ω–µ–π–Ω–æ–µ | –£–≤–µ–ª–∏—á–∏—Ç—å MAX_PARALLEL_THREADS |
| –†–∞–∑–º–µ—Ä —è—â–∏–∫–∞ | –°—Ä–µ–¥–Ω–µ–µ | –£–º–µ–Ω—å—à–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –¥–Ω–µ–π |
| –°–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–∏ | –í—ã—Å–æ–∫–æ–µ | –ó–∞–ø—É—Å–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏ |
| API rate limiting | –í—ã—Å–æ–∫–æ–µ | –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ |

**–¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- 10 —è—â–∏–∫–æ–≤: ~2-3 –º–∏–Ω—É—Ç—ã
- 100 —è—â–∏–∫–æ–≤: ~15-20 –º–∏–Ω—É—Ç
- 1000 —è—â–∏–∫–æ–≤: ~2-3 —á–∞—Å–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

| –ü–∞–∫–µ—Ç | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|--------|------------|
| python-dotenv | >= 0.19.0 | –ó–∞–≥—Ä—É–∑–∫–∞ .env —Ñ–∞–π–ª–æ–≤ |
| requests | >= 2.26.0 | HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API |
| python-dateutil | >= 2.8.0 | –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ |
| aioimaplib | >= 0.9.0 | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π IMAP –∫–ª–∏–µ–Ω—Ç |

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã

**restore_from_checkpoint.py**
- –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ checkpoint
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

**example_usage.py**
- –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

## –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìò [FUNCTION_DOCUMENTATION.md](FUNCTION_DOCUMENTATION.md) - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
- üöÄ [QUICK_START.md](QUICK_START.md) - –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—á–∞–ª—É —Ä–∞–±–æ—Ç—ã
- üíæ [CHECKPOINT_FEATURE.md](CHECKPOINT_FEATURE.md) - –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ checkpoint —Å–∏—Å—Ç–µ–º–µ
- üîß [DELEGATE_SETTINGS.md](DELEGATE_SETTINGS.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- üìã [SUMMARY.md](SUMMARY.md) - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞
- üìù [CHANGELOG.md](CHANGELOG.md) - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ FAQ** –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ
2. **–ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏** –≤ —Ñ–∞–π–ª–µ `delete_messages.log`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ checkpoint —Ñ–∞–π–ª—ã** –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º —Å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
4. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Yandex 360**: https://yandex.ru/dev/api360/

**–í–∞–∂–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- Yandex 360 API: https://yandex.ru/dev/api360/
- OAuth –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://yandex.ru/dev/oauth/
- –ü–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: https://yandex.ru/support/id/authorization/app-passwords.html
- –°–µ—Ä–≤–∏—Å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: https://yandex.ru/support/yandex-360/business/admin/ru/security-service-applications

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤ —Ñ–∞–π–ª–µ `LICENSE`.
